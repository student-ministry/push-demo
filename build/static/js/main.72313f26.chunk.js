(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(53)},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(18),o=a.n(n),i=(a(26),a(3)),s=a(4),l=a(6),u=a(5),m=a(7),p=(a(27),a(28),a(2)),h=a.n(p),d=a(19),y=a.n(d),v=function(e){var t=e.currency,a=e.price;return c.a.createElement("div",{className:"column ".concat(t,"--section")},c.a.createElement("h5",null,"$",a),c.a.createElement("p",null,"1 ",t.toUpperCase()))},E=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={btcprice:0,ltcprice:0,ethprice:0},a.saveStateToLocalStorage=function(){localStorage.setItem("today-state",JSON.stringify(a.state))},a.restoreStateFromLocalStorage=function(){var e=JSON.parse(localStorage.getItem("today-state"));a.setState(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"sendPricePusher",value:function(e){h.a.post("/prices/new",{prices:e}).then(console.log).catch(console.error)}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;if(!navigator.onLine)return this.restoreStateFromLocalStorage();this.pusher=new y.a("APP_KEY",{cluster:"YOUR_CLUSTER",encrypted:!0}),this.prices=this.pusher.subscribe("coin-prices"),h.a.get("https://min-api.cryptocompare.com/data/pricemulti?fsyms=BTC,ETH,LTC&tsyms=USD").then((function(t){var a=t.data,r=a.BTC,c=a.ETH,n=a.LTC;e.setState({btcprice:r.USD,ethprice:c.USD,ltcprice:n.USD},e.saveStateToLocalStorage)})).catch(console.error),this.cryptoSubscription=setInterval((function(){h.a.get("https://min-api.cryptocompare.com/data/pricemulti?fsyms=BTC,ETH,LTC&tsyms=USD").then((function(t){var a=t.data;e.sendPricePusher(a)})).catch(console.error)}),1e4),this.prices.bind("prices",(function(t){var a=t.prices,r=a.BTC,c=a.ETH,n=a.LTC;e.setState({btcprice:r.USD,ethprice:c.USD,ltcprice:n.USD},e.saveStateToLocalStorage)}),this)}},{key:"componentWillUnmount",value:function(){clearInterval(this.cryptoSubscription)}},{key:"render",value:function(){var e=this.state,t=e.ethprice,a=e.btcprice,r=e.ltcprice;return c.a.createElement("div",{className:"today--section container"},c.a.createElement("h2",null,"Current Price"),c.a.createElement("div",{className:"columns today--section__box"},c.a.createElement(v,{currency:"btc",price:a}),c.a.createElement(v,{currency:"eth",price:t}),c.a.createElement(v,{currency:"ltc",price:r})))}}]),t}(r.Component),f=a(20),S=(a(51),a(8)),g=a.n(S),b=function(e){var t=e.price;return c.a.createElement("div",{className:"history--section__box__inner"},c.a.createElement("h4",null,t.date),c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column"},c.a.createElement("p",null,"1 BTC = $",t.btc)),c.a.createElement("div",{className:"column"},c.a.createElement("p",null,"1 ETH = $",t.eth)),c.a.createElement("div",{className:"column"},c.a.createElement("p",null,"1 LTC = $",t.ltc))))};b.defaultProps={price:{date:"",btc:0,eth:0,ltc:0}};var T=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).saveStateToLocalStorage=function(){localStorage.setItem("history-state",JSON.stringify(e.state))},e.restoreStateFromLocalStorage=function(){var t=JSON.parse(localStorage.getItem("today-state"));console.log(t),e.setState(t)},e.getPriceForDay=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,r=g()().subtract(t,"days").unix();h.a.all([e.getETHPrices(r),e.getBTCPrices(r),e.getLTCPrices(r)]).then(h.a.spread((function(t,c,n){var o={date:g.a.unix(r).format("MMMM Do YYYY"),eth:t.data.ETH.USD,btc:c.data.BTC.USD,ltc:n.data.LTC.USD};e.setState(Object(f.a)({},a,o),e.saveStateToLocalStorage)})))},e.getCurrencyPrice=function(e,t){return h.a.get("https://min-api.cryptocompare.com/data/pricehistorical?fsym=".concat(t,"&tsyms=USD&ts=").concat(e))},e.getETHPrices=function(t){return e.getCurrencyPrice(t,"ETH")},e.getBTCPrices=function(t){return e.getCurrencyPrice(t,"BTC")},e.getLTCPrices=function(t){return e.getCurrencyPrice(t,"LTC")},e.state={todayprice:{},yesterdayprice:{},twodaysprice:{},threedaysprice:{},fourdaysprice:{}},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){navigator.onLine||this.restoreStateFromLocalStorage();var e=["today","yesterday","twodays","threedays","fourdays"];for(var t in e)this.getPriceForDay(t,"".concat(e[t],"price"))}},{key:"render",value:function(){var e=this.state,t=e.todayprice,a=e.yesterdayprice,r=e.twodaysprice,n=e.threedaysprice,o=e.fourdaysprice;return console.log(this.state),c.a.createElement("div",{className:"history--section container"},c.a.createElement("h2",null,"History (Past 5 days)"),c.a.createElement("div",{className:"history--section__box"},c.a.createElement(b,{price:t}),c.a.createElement(b,{price:a}),c.a.createElement(b,{price:r}),c.a.createElement(b,{price:n}),c.a.createElement(b,{price:o})))}}]),t}(r.Component),C=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:""},c.a.createElement("div",{className:"topheader"},c.a.createElement("header",{className:"container"},c.a.createElement("nav",{className:"navbar"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement("span",{className:"navbar-item"},"PusherCoins")),c.a.createElement("div",{className:"navbar-end"},c.a.createElement("a",{className:"navbar-item",href:"https://pusher.com",target:"_blank",rel:"noopener noreferrer"},"Pusher.com"))))),c.a.createElement("section",{className:"results--section"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"PusherCoins is a realtime price information about",c.a.createElement("br",null)," BTC, ETH and LTC.")),c.a.createElement("div",{className:"results--section__inner"},c.a.createElement(E,null),c.a.createElement(T,null))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.72313f26.chunk.js.map